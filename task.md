{\rtf1\ansi\ansicpg1252\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0

\f0\fs24 \cf0 # MVP \uc0\u26500 \u24314 \u20998 \u27493 \u35745 \u21010 \
\
\uc0\u26412 \u35745 \u21010 \u22522 \u20110  `architecture.md` \u20013 \u30340 \u26550 \u26500 \u65292 \u30446 \u26631 \u26159 \u24555 \u36895 \u23454 \u29616 \u19968 \u20010  **\u21487 \u29992 \u30340 \u24773 \u32490 \u21672 \u35810 \u24072  AI MVP**\u65292 \u25903 \u25345 \u29992 \u25143 \u27880 \u20876 \u12289 \u23545 \u35805 \u12289 \u31616 \u21333 \u24773 \u32490 \u35782 \u21035 \u21644 \u35746 \u38405 \u25903 \u20184 \u12290 \
\
---\
\
## \uc0\u38454 \u27573  1\u65306 \u39033 \u30446 \u21021 \u22987 \u21270 \
\
### \uc0\u20219 \u21153  1\u65306 \u21021 \u22987 \u21270  Next.js \u39033 \u30446 \
- **\uc0\u30446 \u26631 **\u65306 \u21019 \u24314 \u19968 \u20010 \u21487 \u36816 \u34892 \u30340  Next.js \u39033 \u30446   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u20351 \u29992  `npx create-next-app@latest` \u21021 \u22987 \u21270   \
  - \uc0\u36873 \u25321  TypeScript + App Router  \
  - \uc0\u30830 \u35748 \u26412 \u22320  `npm run dev` \u21487 \u27491 \u24120 \u36816 \u34892   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u35775 \u38382  `http://localhost:3000` \u26174 \u31034  Next.js \u40664 \u35748 \u39318 \u39029   \
\
---\
\
### \uc0\u20219 \u21153  2\u65306 \u38598 \u25104  Tailwind CSS\
- **\uc0\u30446 \u26631 **\u65306 \u37197 \u32622  UI \u26694 \u26550   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u23433 \u35013  `tailwindcss postcss autoprefixer`  \
  - \uc0\u37197 \u32622  `tailwind.config.js` \u21644  `globals.css`  \
  - \uc0\u20462 \u25913 \u39318 \u39029 \u65292 \u26174 \u31034 \u19968 \u20010 \u24102 \u26679 \u24335 \u30340 \u25353 \u38062   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u39318 \u39029 \u25353 \u38062 \u24102  Tailwind \u26679 \u24335   \
\
---\
\
## \uc0\u38454 \u27573  2\u65306 \u29992 \u25143 \u31995 \u32479 \
\
### \uc0\u20219 \u21153  3\u65306 \u37197 \u32622  Supabase \u39033 \u30446 \
- **\uc0\u30446 \u26631 **\u65306 \u36830 \u25509  Supabase \u25968 \u25454 \u24211 \u21644 \u35748 \u35777   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  Supabase \u21019 \u24314 \u26032 \u39033 \u30446   \
  - \uc0\u33719 \u21462  `SUPABASE_URL` \u21644  `SUPABASE_ANON_KEY`  \
  - \uc0\u21019 \u24314  `.env.local` \u25991 \u20214 \u24182 \u20889 \u20837   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u26412 \u22320 \u20195 \u30721 \u33021 \u25104 \u21151 \u21021 \u22987 \u21270  Supabase \u23458 \u25143 \u31471   \
\
---\
\
### \uc0\u20219 \u21153  4\u65306 \u23454 \u29616 \u29992 \u25143 \u27880 \u20876 \u21644 \u30331 \u24405 \
- **\uc0\u30446 \u26631 **\u65306 \u29992 \u25143 \u21487 \u27880 \u20876 \u12289 \u30331 \u24405   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  `(auth)/signup` \u39029 \u38754 \u23454 \u29616 \u27880 \u20876 \u34920 \u21333   \
  - \uc0\u22312  `(auth)/login` \u39029 \u38754 \u23454 \u29616 \u30331 \u24405 \u34920 \u21333   \
  - \uc0\u20351 \u29992  Supabase Auth API \u36827 \u34892 \u35748 \u35777   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u27880 \u20876 \u24182 \u30331 \u24405 \u21518 \u65292 \u33021 \u22312  Supabase \u25511 \u21046 \u21488 \u30475 \u21040 \u29992 \u25143   \
\
---\
\
### \uc0\u20219 \u21153  5\u65306 \u23454 \u29616 \u20250 \u35805 \u20445 \u25345 \u65288 JWT\u65289 \
- **\uc0\u30446 \u26631 **\u65306 \u29992 \u25143 \u30331 \u24405 \u21518 \u33021 \u20445 \u25345 \u20250 \u35805   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u20351 \u29992  Supabase \u25552 \u20379 \u30340  `auth.onAuthStateChange`  \
  - \uc0\u23558 \u29992 \u25143 \u29366 \u24577 \u23384 \u20648 \u22312  React Context  \
  - \uc0\u39029 \u38754 \u21047 \u26032 \u21518 \u20173 \u33021 \u35782 \u21035 \u30331 \u24405 \u29366 \u24577   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u30331 \u24405 \u21518 \u21047 \u26032 \u39029 \u38754 \u20173 \u26174 \u31034 \u24050 \u30331 \u24405 \u29366 \u24577   \
\
---\
\
## \uc0\u38454 \u27573  3\u65306 \u23545 \u35805 \u21151 \u33021 \
\
### \uc0\u20219 \u21153  6\u65306 \u23454 \u29616 \u22522 \u30784 \u32842 \u22825 \u30028 \u38754 \
- **\uc0\u30446 \u26631 **\u65306 \u25552 \u20379 \u19968 \u20010 \u21487 \u36755 \u20837 \u25991 \u26412 \u30340 \u32842 \u22825 \u31383 \u21475   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  `/chat` \u39029 \u38754 \u28155 \u21152 \u36755 \u20837 \u26694 \u21644 \u28040 \u24687 \u21015 \u34920   \
  - \uc0\u25903 \u25345 \u29992 \u25143 \u36755 \u20837 \u28040 \u24687 \u24182 \u26174 \u31034 \u22312 \u21015 \u34920 \u20013   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u36755 \u20837 \u28040 \u24687 \u21518 \u65292 \u39029 \u38754 \u26174 \u31034 \u22312 \u23545 \u35805 \u27668 \u27873 \u20013   \
\
---\
\
### \uc0\u20219 \u21153  7\u65306 \u21019 \u24314  API \u36335 \u30001 \u20195 \u29702  AI\
- **\uc0\u30446 \u26631 **\u65306 \u35843 \u29992  AI API\u65288 \u22914  OpenAI\u65289   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  `/api/ai/stream` \u23454 \u29616 \u19968 \u20010 \u31616 \u21333  POST \u25509 \u21475   \
  - \uc0\u23558 \u29992 \u25143 \u28040 \u24687 \u21457 \u36865 \u32473  AI\u65292 \u24182 \u36820 \u22238 \u21709 \u24212   \
  - \uc0\u22312 \u21069 \u31471 \u35843 \u29992  API \u26174 \u31034  AI \u22238 \u22797   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u36755 \u20837 \u38382 \u39064 \u21518 \u33021 \u24471 \u21040  AI \u22238 \u22797   \
\
---\
\
### \uc0\u20219 \u21153  8\u65306 \u23384 \u20648 \u23545 \u35805 \u25968 \u25454 \u21040  Supabase\
- **\uc0\u30446 \u26631 **\u65306 \u25345 \u20037 \u21270 \u23545 \u35805   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  Supabase \u20013 \u21019 \u24314  `conversations` \u21644  `messages` \u34920   \
  - \uc0\u22312  `/api/ai/stream` \u20445 \u23384 \u27599 \u26465 \u28040 \u24687   \
  - \uc0\u21069 \u31471 \u21152 \u36733 \u26102 \u26597 \u35810 \u29992 \u25143 \u21382 \u21490 \u28040 \u24687 \u24182 \u23637 \u31034   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u21047 \u26032 \u39029 \u38754 \u20173 \u33021 \u30475 \u21040 \u23545 \u35805 \u35760 \u24405   \
\
---\
\
## \uc0\u38454 \u27573  4\u65306 \u24773 \u32490  ABC \u27969 \u31243 \
\
### \uc0\u20219 \u21153  9\u65306 \u35774 \u35745  ABC \u36755 \u20837 \u27969 \u31243 \
- **\uc0\u30446 \u26631 **\u65306 \u29992 \u25143 \u21487 \u36755 \u20837 \u20107 \u20214  \u8594  \u20449 \u24565  \u8594  \u24773 \u32490   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  `/chat` \u28155 \u21152  3 \u27493 \u24341 \u23548 \u36755 \u20837   \
  - \uc0\u23558 \u36755 \u20837 \u32467 \u26524 \u20889 \u20837  `emotion_events` \u34920   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u29992 \u25143 \u21487 \u23436 \u25104 \u19968 \u27425  ABC \u36755 \u20837 \u24182 \u23384 \u20648   \
\
---\
\
### \uc0\u20219 \u21153  10\u65306 AI \u24341 \u23548 \u24773 \u32490 \u35782 \u21035 \
- **\uc0\u30446 \u26631 **\u65306 AI \u26681 \u25454 \u20107 \u20214 \u21644 \u20449 \u24565 \u36755 \u20986 \u24773 \u32490 \u21453 \u39304   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u20462 \u25913  `/api/ai/stream`\u65292 \u22312  prompt \u20013 \u21152 \u20837  "\u20107 \u20214 \u8594 \u20449 \u24565 \u8594 \u24773 \u32490 "  \
  - \uc0\u36820 \u22238 \u24773 \u32490 \u35782 \u21035 \u21644 \u35748 \u30693 \u37325 \u26500 \u24314 \u35758   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u29992 \u25143 \u36755 \u20837 \u20107 \u20214 /\u20449 \u24565 \u21518 \u65292 AI \u36820 \u22238 \u24773 \u32490 \u35299 \u37322   \
\
---\
\
## \uc0\u38454 \u27573  5\u65306 \u25903 \u20184 \u19982 \u35746 \u38405 \
\
### \uc0\u20219 \u21153  11\u65306 \u37197 \u32622  Stripe\
- **\uc0\u30446 \u26631 **\u65306 \u21551 \u29992 \u35746 \u38405 \u25903 \u20184   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u21019 \u24314  Stripe \u36134 \u25143 \u65292 \u33719 \u21462  `STRIPE_SECRET_KEY`  \
  - \uc0\u37197 \u32622  `.env.local`  \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u21518 \u31471 \u33021 \u35843 \u29992  Stripe API \u21019 \u24314  Checkout Session  \
\
---\
\
### \uc0\u20219 \u21153  12\u65306 \u23454 \u29616 \u21319 \u32423 \u21040 \u20184 \u36153 \u21151 \u33021 \
- **\uc0\u30446 \u26631 **\u65306 \u29992 \u25143 \u21487 \u28857 \u20987 \u21319 \u32423 \u24182 \u36339 \u36716  Stripe Checkout  \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  `/pricing` \u39029 \u38754 \u23637 \u31034 \u35746 \u38405 \u35745 \u21010   \
  - \uc0\u21069 \u31471 \u35843 \u29992  `/api/billing/create-checkout`  \
  - \uc0\u25104 \u21151 \u36339 \u36716 \u21040  Stripe Checkout  \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u33021 \u36827 \u20837  Stripe \u25903 \u20184 \u39029 \u38754   \
\
---\
\
### \uc0\u20219 \u21153  13\u65306 \u23454 \u29616 \u35746 \u38405 \u29366 \u24577 \u21516 \u27493 \
- **\uc0\u30446 \u26631 **\u65306 \u25903 \u20184 \u23436 \u25104 \u21518 \u26356 \u26032  Supabase  \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  `/api/webhooks/stripe` \u22788 \u29702 \u25903 \u20184 \u32467 \u26524   \
  - \uc0\u39564 \u35777 \u31614 \u21517 \u24182 \u26356 \u26032  `subscriptions` \u34920   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u25903 \u20184 \u23436 \u25104 \u21518 \u65292 Supabase \u20013 \u26174 \u31034 \u29992 \u25143 \u35746 \u38405 \u29366 \u24577   \
\
---\
\
## \uc0\u38454 \u27573  6\u65306 \u23433 \u20840 \u19982 \u25910 \u23614 \
\
### \uc0\u20219 \u21153  14\u65306 \u21551 \u29992  RLS \u34892 \u32423 \u26435 \u38480 \
- **\uc0\u30446 \u26631 **\u65306 \u30830 \u20445 \u29992 \u25143 \u21482 \u33021 \u35775 \u38382 \u33258 \u24049 \u30340 \u25968 \u25454   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  Supabase \u21551 \u29992  RLS  \
  - \uc0\u20026  `conversations`\u12289 `messages`\u12289 `emotion_events` \u28155 \u21152 \u31574 \u30053   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u19981 \u21516 \u29992 \u25143 \u26080 \u27861 \u35835 \u21462 \u20182 \u20154 \u25968 \u25454   \
\
---\
\
### \uc0\u20219 \u21153  15\u65306 \u28155 \u21152 \u21361 \u26426 \u24178 \u39044 \u25552 \u31034 \
- **\uc0\u30446 \u26631 **\u65306 \u22312 \u29992 \u25143 \u36755 \u20837 \u33258 \u20260 /\u26292 \u21147 \u30456 \u20851 \u20869 \u23481 \u26102 \u65292 \u36820 \u22238 \u32039 \u24613 \u24110 \u21161 \u20449 \u24687   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u22312  `/api/ai/stream` \u28155 \u21152 \u20851 \u38190 \u35789 \u26816 \u27979   \
  - \uc0\u21305 \u37197 \u21518 \u36820 \u22238 \u21361 \u26426 \u24178 \u39044 \u36164 \u28304   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 \u36755 \u20837 \u25935 \u24863 \u35789 \u26102 \u65292 \u19981 \u36208  AI\u65292 \u32780 \u26159 \u26174 \u31034 \u32039 \u24613 \u24110 \u21161   \
\
---\
\
### \uc0\u20219 \u21153  16\u65306 \u19978 \u32447 \u37096 \u32626 \
- **\uc0\u30446 \u26631 **\u65306 \u23558  MVP \u37096 \u32626 \u21040 \u29983 \u20135 \u29615 \u22659   \
- **\uc0\u27493 \u39588 **\u65306   \
  - \uc0\u21069 \u31471 \u21644  API \u37096 \u32626 \u21040  Vercel  \
  - Supabase \uc0\u21644  Stripe \u22312 \u20113 \u31471 \u36816 \u34892   \
  - \uc0\u37197 \u32622 \u29615 \u22659 \u21464 \u37327   \
- **\uc0\u23436 \u25104 \u26631 \u20934 **\u65306 `https://yourapp.com` \u21487 \u35775 \u38382   \
\
---\
\
## \uc0\u9989  \u26368 \u23567 \u21487 \u29992 \u20135 \u21697  (MVP) \u23436 \u25104 \u26631 \u20934 \
1. \uc0\u29992 \u25143 \u21487 \u27880 \u20876  / \u30331 \u24405   \
2. \uc0\u29992 \u25143 \u21487 \u36827 \u20837 \u32842 \u22825 \u30028 \u38754 \u19982  AI \u23545 \u35805   \
3. AI \uc0\u21487 \u24341 \u23548 \u29992 \u25143 \u23436 \u25104  ABC \u27969 \u31243   \
4. \uc0\u23545 \u35805 \u21644 \u24773 \u32490 \u25968 \u25454 \u23384 \u20648 \u21040  Supabase  \
5. \uc0\u29992 \u25143 \u21487 \u21319 \u32423 \u21040 \u20184 \u36153 \u35746 \u38405   \
6. \uc0\u31995 \u32479 \u26377 \u22522 \u30784 \u23433 \u20840 \u21644 \u21361 \u26426 \u24178 \u39044 \u26426 \u21046   \
\
}